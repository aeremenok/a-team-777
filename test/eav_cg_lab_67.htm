<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Peterburg;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
h1
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";}
h2
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	font-style:italic;}
h3
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Arial","sans-serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-link:"Comment Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{mso-style-link:"Body Text Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoBodyTextFirstIndent, li.MsoBodyTextFirstIndent, div.MsoBodyTextFirstIndent
	{mso-style-link:"Body Text First Indent Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	text-indent:14.2pt;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	background:navy;
	font-size:10.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-link:"Comment Subject Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.Normal1, li.Normal1, div.Normal1
	{mso-style-name:Normal1;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:12.0pt;
	font-family:Peterburg;
	layout-grid-mode:line;}
p.FR1, li.FR1, div.FR1
	{mso-style-name:FR1;
	margin-top:18.0pt;
	margin-right:10.0pt;
	margin-bottom:0cm;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	line-height:108%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";
	layout-grid-mode:line;
	font-weight:bold;}
p.a, li.a, div.a
	{mso-style-name:Код;
	mso-style-link:"Код Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Courier New";}
p.a0, li.a0, div.a0
	{mso-style-name:моноШирТекст;
	mso-style-link:"моноШирТекст Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:35.3pt;
	font-size:12.0pt;
	font-family:Consolas;}
span.a1
	{mso-style-name:"Код Знак";
	mso-style-link:Код;
	font-family:"Courier New";}
span.a2
	{mso-style-name:"моноШирТекст Знак";
	mso-style-link:моноШирТекст;
	font-family:Consolas;}
p.a3, li.a3, div.a3
	{mso-style-name:титульник;
	mso-style-link:"титульник Знак";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:-27.0pt;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:16.0pt;
	font-family:"Times New Roman","serif";}
span.a4
	{mso-style-name:"титульник Знак";
	mso-style-link:титульник;}
span.CommentTextChar
	{mso-style-name:"Comment Text Char";
	mso-style-link:"Comment Text";}
span.CommentSubjectChar
	{mso-style-name:"Comment Subject Char";
	mso-style-link:"Comment Subject";
	font-weight:bold;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.BodyTextChar
	{mso-style-name:"Body Text Char";
	mso-style-link:"Body Text";}
span.BodyTextFirstIndentChar
	{mso-style-name:"Body Text First Indent Char";
	mso-style-link:"Body Text First Indent";}
@page Section1
	{size:595.3pt 841.9pt;
	margin:35.95pt 42.5pt 2.0cm 3.0cm;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=RU>

<div class=Section1>

<p class=a3 style='margin-left:0cm'>Министерство Образования Российской
Федерации</p>

<p class=a3 style='margin-left:0cm'>Санкт-Петербургский Государственный
Электротехнический Университет «ЛЭТИ»</p>

<div style='border:none;border-bottom:solid windowtext 1.5pt;padding:0cm 0cm 1.0pt 0cm'>

<p class=a3 style='margin-left:0cm;border:none;padding:0cm'>Кафедра МО ЭВМ</p>

</div>

<p class=MsoNormal>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>Пояснительная записка к курсовой работе</p>

<p class=a3 style='margin-left:0cm'>по дисциплине</p>

<p class=a3 style='margin-left:0cm'>«Компьютерная Графика»</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 align=right style='margin-left:0cm;text-align:right'>Преподаватель: Герасимова        Т.
В.</p>

<p class=a3 align=right style='margin-left:0cm;text-align:right'>Выполнил:                  студент     гр.    3351</p>

<p class=a3 align=right style='margin-left:0cm;text-align:right'>Ерёменок А. В.</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>&nbsp;</p>

<div style='border:none;border-bottom:solid windowtext 1.5pt;padding:0cm 0cm 1.0pt 0cm'>

<p class=a3 style='margin-left:0cm;border:none;padding:0cm'>&nbsp;</p>

</div>

<p class=MsoNormal>&nbsp;</p>

<p class=a3 style='margin-left:0cm'>Санкт-Петербург </p>

<p class=a3 style='margin-left:0cm'>2007</p>

<h1>1. Постановка задачи</h1>

<h2>1.1. Цель выполнения задания </h2>

<p class=MsoNormal style='text-align:justify'>Знакомство с требованиями,
которые необходимо выполнить при выводе 3D объектов при построении отражений и
теней на основе источников света и методов отражения с использованием
библиотеки OpenG<span lang=EN-US>L</span>.</p>

<h2>1.2. Требования и рекомендации к выполнению задания:</h2>

<p class=MsoNormal style='text-align:justify'>- проанализировать полученное
задание, выделить информационные объекты и действия;</p>

<p class=MsoNormal style='text-align:justify'>- разработать программу с
использованием требуемых операций по трехмерному представлению объектов.</p>

<h2>1.3. Задание к лабораторной работе 6</h2>

<p class=MsoNormal style='text-align:justify'>1) Реализация комнаты, в комнате
находятся геометрические предметы различных форм и свойств (кубы,
параллелепипеды, шары), и протяженный источник света на потолке. Присутствует
также камера с заданными параметрами (обычно она расположена так, чтобы была
видна вся комната). Сцена не должна превращаться в набор разнородных предметов.
Эстетичность и оригинальность выполненного задания принимается во внимание.</p>

<p class=MsoNormal style='text-align:justify'>2) Реалистичность сцены необходимо
значительно повысить за счет разбиения многоугольников. Суть этого в том, что
модели освещение OpenGL освещенность вычисляется в вершинах многоугольника с
учетом направления нормалей в этих вершинах, а затем линейно интерполируется по
всей поверхности. Если используются относительно большие многоугольники, то,
очевидно, невозможно получить действительно плавные переходы и затенения. Для
преодоления этого недостатка можно разбивать большие грани (стены, например) на
множество меньших по размерам. Соответственно разброс в направлении нормалей в
вершинах одного многоугольника не будет столь велик, и затенение станет более
плавным.</p>

<h2>1.4. Задание к курсовой работе</h2>

<p class=MsoNormal style='text-align:justify'>Реализовать подобие игры «<span
lang=EN-US>snake</span>»: по поверхности движется «змейка», составленная из шарообразных
звеньев. При этом она должна реагировать на столкновения со стенкой или краями
поверхности. Должна быть возможность управления движением «змейки» и изменения
ее длины.</p>

<h1>2. Анализ задания</h1>

<p class=MsoNormal style='text-align:justify'>1)         Т.к. звеньями «змейки»
являются шары, то можно объединить выполнение лабораторной работы 6 и курсовой
работы.</p>

<p class=MsoNormal style='text-align:justify'>2)         Выполнение разобьем на
этапы:</p>

<p class=MsoNormal style='margin-left:35.4pt;text-align:justify'>1. Разработка
модели освещения и движения камеры</p>

<p class=MsoNormal style='margin-left:35.4pt;text-align:justify'>2. Отрисовка
сферы, разбитой на многоугольники</p>

<p class=MsoNormal style='margin-left:35.4pt;text-align:justify'>3. Отрисовка
отражений</p>

<p class=MsoNormal style='margin-left:35.4pt;text-align:justify'>4. Отрисовка
теней</p>

<p class=MsoNormal style='margin-left:35.4pt;text-align:justify'>5. Реализация
модели «змейки», составленной из сфер</p>

<p class=MsoNormal style='margin-left:35.4pt;text-align:justify'>6. Разработка
модели движения «змейки» по 2х мерной плоскости</p>

<p class=MsoNormal style='margin-left:35.4pt;text-align:justify'>7. Разработка
модели столкновений «змейки» с краями плоскости</p>

<h1>3. Выполнение</h1>

<p class=MsoNormal style='text-align:justify'>За основу возьмем программу,
разработанную в предыдущих лабораторных работах.</p>

<h2>3.1. Разработка модели освещения и движения камеры</h2>

<h3>3.1.1. Описание</h3>

<p class=MsoNormal style='text-align:justify'>1) Согласно требованию, в сцене
должен присутствовать протяженный источник света. Его можно имитировать
несколькими точечными источниками – в данном случае 3мя. Для этого
разработанный в ходе л/р 5 «Освещение» код инициализации источников света
модифицируем следующим образом: все источники изначально включены, имеют равную
высоту, равноудалены друг от друга. Добавим возможность перемещения источника
для демонстрации отрисовки теней (см. п.4.2. «Горячие клавиши»).</p>

<p class=MsoNormal style='text-align:justify'>2) Движению камеры в трехмерном
пространстве сопоставим движение мыши с зажатой левой кнопкой в двухмерной
плоскости экрана. Это можно сделать, ограничив движение наблюдателя вокруг
сцены сферой постоянного радиуса вокруг нее. Тогда перемещение мыши по оси
экрана Х будет соответствовать изменению долготы наблюдателя на поверхности
сферы, а по оси <span lang=EN-US>Y</span><span lang=EN-US> </span>– широты.</p>

<h3><span lang=EN-US>3.1.2. </span>Текст программы</h3>

<p class=MsoNormal>1) Протяженный источник</p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:blue'>CVolumeHandler</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
style='font-size:8.0pt;font-family:"Courier New";color:blue'>CVolumeHandler</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>()</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>…</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_EnabledLights</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#A000A0'>TRUE</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_EnabledLights</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#A000A0'>TRUE</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_EnabledLights</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#A000A0'>TRUE</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-align:justify'>             <span
style='font-size:8.0pt;font-family:"Courier New"'>…</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0][posX]
= 0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0][posY]
= -1.5f;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0][posZ]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#A000A0'>LIGHT_HEIGHT</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0][posW]
= 0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1][posX]
= 0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1][posY]
= 0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1][posZ]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#A000A0'>LIGHT_HEIGHT</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1][posW]
= 0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2][posX]
= 0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2][posY]
= 1.5f;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2][posZ]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#A000A0'>LIGHT_HEIGHT</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LightParameters</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2][posW] = 0;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>…</span></p>

<p class=MsoNormal>2) Движение камеры</p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>COglshapeView</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>OnMouseMove</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>UINT</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>nFlags</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CPoint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>) </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>if (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LBClicked</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        double </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>eps</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> =
30;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        double </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>difX</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.x -
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>OldPoint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.x;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        double </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>difY</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.y -
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>OldPoint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.y;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        if (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>fabs</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>difX</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>)
&gt; </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>eps</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'> || </span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#880000'>fabs</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>(</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>difY</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>)
&gt; </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>eps</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> += </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>difY</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>mpiRectHeight</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Longitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> += </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>difX</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>mpiRectWidth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            if
(</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>
&gt; </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#A000A0'>HALF_M_PI</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>HALF_M_PI</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            }
else if ( </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>
&lt; 0 )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> =
0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
double </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>cosA</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'> = </span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#880000'>cosf</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_VolHandler</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Volparameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[LAE_X]
= </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>Radius</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#880000'>sinf</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>(</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>m_MouseCoord</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Longitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>) * </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>cosA</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_VolHandler</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Volparameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[LAE_Y]
= </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>Radius</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>cosA</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'> * </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#880000'>cosf</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>(</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>m_MouseCoord</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Longitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_VolHandler</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Volparameters</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[LAE_Z]
= </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>Radius</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#880000'>sinf</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>(</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>m_MouseCoord</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>OldPoint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Invalidate</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();       
</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        }</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:blue'>CView</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>OnMouseMove</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>nFlags</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>COglshapeView</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>OnLButtonDown</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>UINT</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>nFlags</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CPoint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>) </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LBClicked</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>TRUE</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>OldPoint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    if (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> ==
-1)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CRect</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>rect</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>       
this-&gt;</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#880000'>GetWindowRect</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>(&amp;</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>rect</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>mpiRectWidth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>M_PI</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> / </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>rect</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Width</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>mpiRectHeight</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>M_PI</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> / </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>rect</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Height</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Altitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.y *
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>mpiRectHeight</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_MouseCoord</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>Longitude</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.x *
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_MouseCoord</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>.</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>mpiRectWidth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    }</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:blue'>CView</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>OnLButtonDown</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>nFlags</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>COglshapeView</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>OnLButtonUp</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>UINT</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>nFlags</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CPoint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>) </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_LBClicked</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>FALSE</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CView</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>OnLButtonUp</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>nFlags</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>point</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<h2>3.2. Отрисовка сферы, разбитой на многоугольники</h2>

<h3>3.2.1. Описание</h3>

<p class=MsoNormal style='text-align:justify'>За основу полигональной сферы
возьмем 20гранник – икосаэдр. Будем разбивать его грани на многоугольники
рекурсивно, делая их выпуклыми. Это будет происходить, пока не будет достигнута
заданная глубина. Чем больше глубина отрисовки, тем выше качество изображения
сферы и ее освещения, но тем сложнее отрисовка сцены.</p>

<h3>3.2.2. Текст программы</h3>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>//Координаты вершин</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:blue'>GLfloat</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#25437C'> </span><span style='font-size:
8.0pt;font-family:"Courier New";color:gray'>vdata</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#25437C'>[12][3] = {</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    {-</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#25437C'>,0.0,</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},{</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,0.0,</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},{-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,0.0,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},{</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,0.0,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    {0.0,</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},{0.0,</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},{0.0,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},{0.0,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>},</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    {</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#25437C'>,</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#25437C'>,0.0},{-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,0.0},{</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,0.0},{-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>Z</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,-</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>X</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,0.0}</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>};</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>//Индексы вершин для треугольников</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:blue'>GLuint</span><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'> </span><span style='font-size:8.0pt;
font-family:"Courier New";color:gray'>tindices</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#25437C'>[20][3] = {</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    {1,4,0},{4,9,0},{4,5,9},{8,5,4},{1,8,4},</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>   
{1,10,8},{10,3,8},{8,3,5},{3,2,5},{3,7,2},</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>   
{3,10,7},{10,6,7},{6,11,7},{6,0,11},{6,1,0},</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>   
{10,1,6},{11,0,9},{2,11,9},{5,2,9},{11,2,7}</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>};</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>// Construction/Destruction</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:blue'>CSphere</span><span style='font-size:
8.0pt;font-family:"Courier New";color:#25437C'>::</span><span style='font-size:
8.0pt;font-family:"Courier New";color:blue'>CSphere</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>()</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Divisions</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> =
2;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:blue'>CSphere</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::~</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CSphere</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>()</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CSphere</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Normalize</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>v</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>[3] )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>GLfloat</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>d</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>sqrt</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0]*</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0]+</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1]*</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1]+</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2]*</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2]);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0]/=</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>d</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1]/=</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>d</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2]/=</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>d</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CSphere</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawTriangle</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
float *</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>v1</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>, float *</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>v2</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, float *</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glBegin</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_TRIANGLES</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glNormal3fv</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v1</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glVertex3fv</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v1</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glNormal3fv</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v2</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glVertex3fv</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v2</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glNormal3fv</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glVertex3fv</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glEnd</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CSphere</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Subdivide</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
float *</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>v1</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>, float *</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>v2</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, float *</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
long </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>depth</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>GLfloat</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v12</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[3],
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>v23</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>[3], </span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:gray'>v31</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>[3];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>GLint</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    if(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>==0)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawTriangle</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v1</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v2</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        return;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    for (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>=0;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&lt;3;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>++)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v12</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>]=(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v1</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>]+</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v2</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>])/2.0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v23</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>]=(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v2</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>]+</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>])/2.0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v31</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>]=(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>]+</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v1</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>])/2.0;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Normalize</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v12</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Normalize</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v23</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Normalize</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v31</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Subdivide</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v1</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v12</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v31</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-1);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Subdivide</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v2</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v23</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v12</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-1);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Subdivide</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v3</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v31</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v23</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-1);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Subdivide</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v12</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v23</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>v31</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-1);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CSphere</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawSphere</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>x</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>, float </span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>y</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>scale</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glPushMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glTranslatef</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>x</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>y</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
0);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glScalef</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>scale</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>scale</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>scale</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    for( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> =
0; </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>i</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'> &lt; 20; </span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>i</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>++ )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {    </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Subdivide</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
&amp;</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>vdata</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>tindices</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>][0]][0],</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
&amp;</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>vdata</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>tindices</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>][1]][0],</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
&amp;</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>vdata</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>tindices</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>][2]][0],</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Divisions</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span style='font-size:
8.0pt;font-family:"Courier New";color:#880000'>glPopMatrix</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<h2>3.3. Отрисовка отражений</h2>

<h3>3.3.1. Описание</h3>

<p class=MsoNormal>Для рисования отражений воспользуемся алгоритмом,
предложенным в пособии[1]:</p>

<p class=MsoBodyTextFirstIndent style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:35.7pt;margin-bottom:.0001pt;text-indent:-17.85pt'><i><span
style='font-size:12.0pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></i><i><span style='font-size:12.0pt'>Рисуем сцену как обычно, но
без объектов-зеркал.</span></i></p>

<p class=MsoBodyTextFirstIndent style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:35.7pt;margin-bottom:.0001pt;text-indent:-17.85pt'><i><span
style='font-size:12.0pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></i><i><span style='font-size:12.0pt'>Используя буфер маски</span></i><i><span style='font-size:12.0pt'>, ограничиваем дальнейший вывод проекцией зеркала на
экран.</span></i></p>

<p class=MsoBodyTextFirstIndent style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:35.7pt;margin-bottom:.0001pt;text-indent:-17.85pt'><i><span
style='font-size:12.0pt'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></i><i><span style='font-size:12.0pt'>Визуализируем сцену,
отраженную относительно плоскости зеркала. При этом буфер маски позволит
ограничить вывод формой проекции объекта-зеркала.</span></i></p>

<h3><span lang=EN-US>3.3.2. </span>Текст программы</h3>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CVolumeHandler</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawScene</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>()</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>…</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>if (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Reflection</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glEnable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_STENCIL_TEST</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>/* условие всегда
выполнено и значение в буфере будет равно 1*/</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilFunc</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_ALWAYS</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, 1,
0);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilOp</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_KEEP</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_KEEP</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_REPLACE</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawVisibleFloor</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>alpha</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span style='font-size:
8.0pt;font-family:"Courier New";color:green'>/* условие выполнено и тест дает
истину только если значение в буфере маски равно 1 */</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilFunc</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_EQUAL</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
0x1, 0xffffffff);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>/* ничего не
меняем в буфере */</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilOp</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_KEEP</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_KEEP</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_KEEP</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>plane</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[3]
= {0,0,-</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>depth</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>};</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>refMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[4][4]
= {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
{0,0,0,0},</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
{0,0,0,0},</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
{0,0,0,0},</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
{0,0,0,0}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        };</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>normal</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[3]
= {0,0,1};</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Effects</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>ReflectionMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>refMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>plane</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>normal</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glPushMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glMultMatrixf</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>((float
*)</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>refMatrix</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glEnable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_BLEND</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glBlendFunc</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_SRC_ALPHA</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_ONE_MINUS_SRC_ALPHA</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawMirroredScene</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(0, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>addScale</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glDisable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_BLEND</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glPopMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glDisable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_STENCIL_TEST</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>…</span></p>

<h2>3.4. Отрисовка теней </h2>

<h3>3.4.1. Описание</h3>

<p class=MsoNormal>Для рисования теней воспользуемся алгоритмом, предложенным в
пособии[1]:</p>

<p class=MsoBodyTextFirstIndent style='margin-bottom:0cm;margin-bottom:.0001pt'><i><span
style='font-size:11.0pt'>Для всех точек объекта находится их проекция
параллельно вектору, соединяющему данную точку и точку, в которой находится
источник света, на некую заданную плоскость. Тем самым получаем новый объект,
целиком лежащий в заданной плоскости. Этот объект и является тенью исходного.</span></i></p>

<p class=MsoNormal>Для улучшения качества теней:</p>

<p class=MsoBodyTextFirstIndent style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:35.7pt;margin-bottom:.0001pt;text-indent:-17.85pt'><i>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></i><i>Очищаем
буфер маски значением 0</i></p>

<p class=MsoBodyTextFirstIndent style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:35.7pt;margin-bottom:.0001pt;text-indent:-17.85pt'><i>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></i><i>Отображаем
заданную область отсечения, устанавливая значения в  буфере маски в 1</i></p>

<p class=MsoBodyTextFirstIndent style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:35.7pt;margin-bottom:.0001pt;text-indent:-17.85pt'><i>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></i><i>Рисуем
тени в тех областях, где в буфере маски установлены значения 1. Если тест
проходит, устанавливаем в эти области значение 2.</i></p>

<h3><span lang=EN-US>3.</span>4<span lang=EN-US>.2. </span>Текст программы</h3>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CVolumeHandler</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawScene</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>()</span></p>

<p class=MsoNormal><span style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>{</span></p>

<p class=MsoNormal><span style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>…</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    if (</span><span style='font-size:
8.0pt;font-family:"Courier New";color:gray'>m_Shadows</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span style='font-size:
8.0pt;font-family:"Courier New";color:green'>/* очищаем буфер маски*/</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glClearStencil</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(0x0);
</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>/* </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>включаем</span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'> </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>тест</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'> */</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glEnable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_STENCIL_TEST</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>); </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>/* условие всегда
выполнено и значение в буфере будет равно 1*/</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilFunc</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_ALWAYS</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
0x1, 0xffffffff);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>/* в любом случае
заменяем значение в буфере маски*/</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilOp</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_REPLACE</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_REPLACE</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_REPLACE</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>); </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>/* выводим
геометрию, по которой затем будет отсечена тень*/</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span style='font-size:
8.0pt;font-family:"Courier New";color:#880000'>DrawVisibleFloor</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>alpha</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span style='font-size:
8.0pt;font-family:"Courier New";color:green'>/* условие выполнено и тест дает
истину только если значение в буфере маски равно 1 */</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilFunc</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_EQUAL</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
0x1, 0xffffffff);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>/* значение в
буфере равно 2,если тень уже выведена */</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glStencilOp</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_KEEP</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_KEEP</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_INCR</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>/* </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>выводим</span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'> </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>тени</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'> */</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawShadows</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>depth</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>addScale</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        </span><span style='font-size:
8.0pt;font-family:"Courier New";color:#880000'>glDisable</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_STENCIL_TEST</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>    </span><span style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>…</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CVolumeHandler</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawShadows</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>depth</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>, float </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>scale</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>floorShadow</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[4][4]
= {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>       
{0,0,0,0},</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>       
{0,0,0,0},</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>       
{0,0,0,0},</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>       
{0,0,0,0}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    };</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>plane</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[4]
= {0,0,1,</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>depth</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>};</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>float </span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>lightpos</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[4] =
{0,0,0,0};</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span style='font-size:
8.0pt;font-family:"Courier New";color:green'>// Делаем тени полупрозрачными с
использованием смешения цветов(blending)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glEnable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_BLEND</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glBlendFunc</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_SRC_ALPHA</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_ONE_MINUS_SRC_ALPHA</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glDisable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_LIGHTING</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);    
</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glColor4f</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(0.0,
0.0, 0.0, 0.5);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    for (int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>=0; </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>
&lt; 3</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:green'>/*LIGHTS_NUM*/</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>; ++</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        if (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_EnabledLights</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>])</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lightpos</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[0]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_LightParameters</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>[</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>][posX];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lightpos</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[1]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_LightParameters</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>[</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>][posY];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lightpos</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_LightParameters</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>[</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>][posZ];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lightpos</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[3]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>m_LightParameters</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>[</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>i</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>][posW];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>m_Effects</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>.</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>ShadowMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>floorShadow</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>plane</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lightpos</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);  
</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glPushMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>// </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>Проецируем</span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'> </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>тень</span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'> </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glMultMatrixf</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>((</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>GLfloat</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> *) </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>floorShadow</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>               </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>// Визуализируем
сцену в проекции</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>               </span><span
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>DrawOrigScene</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>scale</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>            </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glPopMatrix</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glEnable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_LIGHTING</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>glDisable</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>GL_BLEND</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal><span style='font-size:8.0pt;font-family:"Courier New";
color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<h2>3.5. Реализация модели «змейки», составленной из сфер</h2>

<h3>3.5.1. Описание</h3>

<p class=MsoNormal style='text-align:justify'>1) «Змейка» состоит из набора
одинаковых сфер, для каждой из которых известно ее состояние.</p>

<p class=MsoNormal style='text-align:justify'>2) Количество сфер в наборе может
неограниченно изменяться</p>

<p class=MsoNormal style='text-align:justify'>Эти соображения приводят к выбору
для хранения информации о «змейке» в динамическом списке. За основу возьмем
линейный однонаправленный список, разработанный в рамках курса ООП,
модифицировав его соответствующим образом.</p>

<h3>3.5.2. Текст программы</h3>

<p class=MsoNormal><i><u><span lang=EN-US>CElem.h:</span></u></i></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>enum
SnakeLinkParameters{x, y, normX, normY};</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:blue'>#define </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>NULL</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> 0</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>class </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    private:</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
private ///////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    public:</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> *</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;  </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
reference to next element in a list</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[2];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
constructor</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>           
const float* </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>p_Params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext0</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#A000A0'>NULL</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>            );</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
getters</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>bool</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>TestColPlane</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
const float * </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>plane</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>, float </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>rad</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>GetColSquare</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(float
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>left</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>, float </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>right</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>top</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>bottom</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>, float </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>radius</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>GetColX</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(float
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>left</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>, float </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>right</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>radius</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>GetColY</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(float
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>top</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>, float </span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>bottom</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>radius</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
destructor</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        ~</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
public ///////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}; </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
CElem</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal><i><u><span lang=EN-US>CList.h:</span></u></i></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>enum
SnakeParameters{</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:gray'>vx</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>, </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>vy</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
mv, av};</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>class </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CList</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    private:</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> *</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CEEntryPoint_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;     
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:green'>// points to the last element in a list</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>                                  
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:green'>// which precedes the first element</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>dist</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lastAngle</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
private ///////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    public:</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>border</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[4];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>Dist</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>()
const { return </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>dist</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>; }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>length</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
constructors</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CList</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>vx</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'> = 0.1, float </span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>vy</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = 0.1, float </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>d</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> =
0.2, int </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>len</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'> = 7);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:green'>//
modifiers</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>AddElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(const
float* </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>p_Params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>AddElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>RemoveElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        float* </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>GetElemParams</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(const
int </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>number</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>GetDirection</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(float*
</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>dx</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#25437C'>, float* </span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>dy</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>update</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>start</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>move</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(const
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>timeInterval</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>push</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>mult</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'> );</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>turn</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(const
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>angle</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
style='font-size:8.0pt;font-family:"Courier New";color:green'>// destructor</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>        ~</span><span
style='font-size:8.0pt;font-family:"Courier New";color:blue'>CList</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>();</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span style='font-size:
8.0pt;font-family:"Courier New";color:green'>// public
////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>}; </span><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>// CList</span></p>

<p class=MsoNormal><span style='font-size:8.0pt;font-family:"Courier New";
color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<h2>3.6. Разработка модели движения «змейки» по 2х мерной плоскости</h2>

<h3>3.6.1. Описание</h3>

<p class=MsoNormal style='text-align:justify'>1) «Змейка» равномерно движется
на плоскости – значит, ее движение можно описать декартовыми координатами <span
lang=EN-US>X</span><span lang=EN-US> </span>и <span lang=EN-US>Y</span>, а
также вектором скорости ее головы (т.к. голова управляет движением тела). Для
удобства вычислений вектор представим в программе как в виде модуля и
направления, так и в виде проекций на координатные оси.</p>

<p class=MsoNormal style='text-align:justify'>2) «Змейка» - это система
взаимосвязанных между собой элементов. Поэтому перемещение одного по плоскости
влияет на перемещение другого.</p>

<p class=MsoNormal style='text-align:justify'>3) Т.к. движением управляет
голова, то движение происходит последовательно от головы к хвосту. Это значит,
что при изменении координат первого элемента списка, последовательно изменяются
координаты всех следующих за ним.</p>

<p class=MsoNormal style='text-align:justify'>4) Т.к. движением управляет
голова, то поворот «змейки» происходит только после поворота вектора скорости
«змейки», закрепленного за головой, имеющего там свое начало.</p>

<p class=MsoNormal style='text-align:justify'>5) Для вычисления координат
каждого звена согласно координатам предшествующего ему воспользуемся наименее
затратной по вычислениям модели, не требующей в отличии от остальных сложных
тригонометрических вычислений, потребляющих ресурсы пропорционально длине
«змейки». Эта модель – перемещение «змейки» усреднение координат с координатами
предшествующего звена при перемещении на кратные радиусу звеньев отрезки.</p>

<h3><span lang=EN-US>3.</span>6<span lang=EN-US>.2. </span>Текст программы</h3>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CList</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>move</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(
const float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>timeInterval</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lastAngle</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[av];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> *</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CEEntryPoint_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[x]
+= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[vx] * </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>timeInterval</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[y]
+= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[vy] * </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>timeInterval</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
style='font-size:8.0pt;font-family:"Courier New";color:#880000'>update</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>CEEntryPoint_</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span style='font-size:
8.0pt;font-family:"Courier New";color:green'>// проверка на столкновения</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>    </span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CEEntryPoint_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>push</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>timeInterval</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CList</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>update</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>start</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>* </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>start</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    while (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> != </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CEEntryPoint_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[x]
+= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>cePtr</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>-&gt;</span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>params</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[x];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[x]
/= 2;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[y]
+= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>cePtr</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>-&gt;</span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>params</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[y];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[y]
/= 2;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>CENext_</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CList</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>turn</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>( const
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>angle</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    if ( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>fabs</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>lastAngle</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> - (</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[av]
+ 2*</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>angle</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>)) &lt; </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:#A000A0'>HALF_M_PI</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[av]
+= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>angle</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vx]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[mv] * </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:#880000'>cosf</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[av]);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vy]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[mv] * </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:#880000'>sinf</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[av]);   
</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>}    </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:8.0pt;
font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<h2>3.7. Разработка модели столкновений «змейки» с краями плоскости</h2>

<h3>3.7.1. Описание</h3>

<p class=MsoNormal>Модель столкновений состоит из 2х частей:</p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
-18.0pt'>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Определения
столкновений. Звено согласно информации о стенках и окружающей, содержащейся у
него среде будет выдавать результат – произошло ли столкновение для каждой из
осей <span lang=EN-US>X</span><span lang=EN-US> </span>и  Y.</p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
-18.0pt'>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Если
произошло столкновение по оси Х – проекция скорости на ось <span lang=EN-US>X</span><span
lang=EN-US> </span>инвертируется. Если произошло столкновение по оси <span
lang=EN-US>Y</span> – проекция скорости на ось <span lang=EN-US>Y</span><span
lang=EN-US> </span>инвертируется. Если произошло столкновение по обеим осям
(например, «змейка» попала в угол) – обе проекции инвертируются.</p>

<p class=MsoNormal style='text-align:justify'>Это позволяет «змейке»
отскакивать от препятствий.</p>

<h3>3.7.2. Текст программы</h3>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>void </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CList</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>::</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>push</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:blue'>CElem</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> * </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>,
float </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>mult</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'> )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>{</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>dirX</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>GetColX</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(-</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>border</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>border</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>dist</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> /
2);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    int </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>dirY</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> = </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>GetColY</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>border</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, -</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>border</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>, </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>dist</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> /
2);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    if ( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>dirX</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> !=
-1 )</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vx]
= -</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[vx];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    if ( </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>dirY</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'> !=
-1)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    {</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>        </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vy]
= -</span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[vy];</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    }</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[x]
+= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[vx] * </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>mult</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>-&gt;</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[y]
+= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[vy] * </span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>mult</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#880000'>update</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>(</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>cePtr</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>);   
</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[mv]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#880000'>sqrtf</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>(</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>params</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vx]*</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vx]
+ </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:gray'>params</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>[vy]*</span><span lang=EN-US style='font-size:
8.0pt;font-family:"Courier New";color:gray'>params</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vy]);</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>    </span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[av]
= </span><span lang=EN-US style='font-size:8.0pt;font-family:"Courier New";
color:#880000'>atanf</span><span lang=EN-US style='font-size:8.0pt;font-family:
"Courier New";color:#25437C'>(</span><span lang=EN-US style='font-size:8.0pt;
font-family:"Courier New";color:gray'>params</span><span lang=EN-US
style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vy]*</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:gray'>params</span><span
lang=EN-US style='font-size:8.0pt;font-family:"Courier New";color:#25437C'>[vx]);</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:8.0pt;
font-family:"Courier New";color:#25437C'>}</span></p>

<p class=MsoNormal><span style='font-size:8.0pt;font-family:"Courier New";
color:green'>//////////////////////////////////////////////////////////////////////////</span></p>

<h1>4. Интерфейс</h1>

<h2>4.1. Меню</h2>

<p class=MsoNormal style='text-align:justify'>1) Снабдим приложение пунктом
меню 3<span lang=EN-US>D</span>, заимствованным из прошлых лабораторных работ. </p>

<p class=MsoNormal style='text-align:justify'>2) Оставим в нем пункты <i>3</i><i><span
lang=EN-US>D</span><span lang=EN-US> </span></i><i><span lang=EN-US>Parameters</span></i><span
lang=EN-US> </span>и <i><span lang=EN-US>Light</span><span lang=EN-US> </span></i><i><span
lang=EN-US>Parameters</span></i><span lang=EN-US> </span>для более гибкой
настройки объемных преобразований и освещения.</p>

<p class=MsoNormal style='text-align:justify'>3) Дополним его пунктом <span
lang=EN-US>Depth</span> с подпунктами <i><span lang=EN-US>Depth</span> / </i><i><span
lang=EN-US>Increase</span></i><span lang=EN-US> </span>и <i><span lang=EN-US>Depth</span>
/ </i><i><span lang=EN-US>Decrease</span></i><span lang=EN-US> </span>для
регулировки глубины разбиения сфер на полигоны.</p>

<h2>4.2. Горячие клавиши</h2>

<p class=MsoNormal style='text-align:justify'>Для ускорения и большего удобства
работы пользователя с программой, введем систему горячих клавиш:</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>Num</span> +</b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Увеличить глубину разбиения сфер</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>Num</span> -</b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Уменьшить глубину разбиения сфер</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>Num *</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Увеличить яркость освещения</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>Num /</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Уменьшить яркость освещения</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>S</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Включить/Выключить отрисовку теней</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>R</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Включить/Выключить отрисовку отражений</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>L</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Включить/Выключить отрисовку положения источников света</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>I</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Увеличить длину «змейки»</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>D</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Уменьшить длину «змейки»</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>Q</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Переместить источник света в положительном направлении</i></p>
  </td>
 </tr>
 <tr>
  <td width=67 valign=top style='width:50.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US>A</span></b></p>
  </td>
  <td width=464 valign=top style='width:347.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><i>Переместить источник света в отрицательном направлении</i></p>
  </td>
 </tr>
</table>

<h1>5. Испытания программы</h1>

<p class=MsoNormal>Результаты испытаний представлены в <i>табл. 1.</i></p>

<p class=MsoNormal align=right style='margin-right:35.4pt;text-align:right'><i>Таблица
1</i></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=597
 style='width:448.05pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=39 style='width:28.9pt;border:solid windowtext 1.0pt;padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>№</b></p>
  </td>
  <td width=559 colspan=2 style='width:419.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Описание/Изображение</b></p>
  </td>
 </tr>
 <tr>
  <td width=39 rowspan=2 style='width:28.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Тени</i></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Отражения</i></p>
  </td>
 </tr>
 <tr>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><img width=271
  height=278 src="eav_cg_lab_67_files/image001.jpg"></b></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><img width=280
  height=287 src="eav_cg_lab_67_files/image002.jpg"></b></p>
  </td>
 </tr>
</table>

<span style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=597
 style='width:448.05pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=39 rowspan=2 style='width:28.9pt;border:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=559 colspan=2 style='width:419.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 1.4pt 0cm 1.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Изменение формы
  теней при перемещении источника света</i></p>
  </td>
 </tr>
 <tr style='height:2.0cm'>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center'><b><img width=272
  height=279 src="eav_cg_lab_67_files/image003.jpg"></b></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center'><i><img width=272
  height=279 src="eav_cg_lab_67_files/image004.jpg"></i></p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=39 rowspan=2 style='width:28.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 1.4pt 0cm 1.4pt;height:16.75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:16.75pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Глубина
  разбиения 0(икосаэдр)</i></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:16.75pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Глубина
  разбиения 5</i></p>
  </td>
 </tr>
 <tr style='height:2.0cm'>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center'><b><img width=271
  height=278 src="eav_cg_lab_67_files/image005.jpg"></b></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center'><i><img width=280
  height=287 src="eav_cg_lab_67_files/image006.jpg"></i></p>
  </td>
 </tr>
</table>

<span style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=597
 style='width:448.05pt;border-collapse:collapse;border:none'>
 <tr style='height:11.95pt'>
  <td width=39 rowspan=3 style='width:28.9pt;border:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:11.95pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=559 colspan=2 style='width:419.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 1.4pt 0cm 1.4pt;height:11.95pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Последовательность
  поворота «змейки» на 90<sup>0</sup></i></p>
  </td>
 </tr>
 <tr style='height:2.0cm'>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><img width=272 height=279 src="eav_cg_lab_67_files/image007.jpg"></p>
  <p class=MsoCaption align=center style='text-align:center'>1</p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=EN-US><img width=272 height=279
  src="eav_cg_lab_67_files/image008.jpg"></span></p>
  <p class=MsoCaption align=center style='text-align:center'>2</p>
  </td>
 </tr>
 <tr style='height:2.0cm'>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=EN-US><img width=272 height=279
  src="eav_cg_lab_67_files/image009.jpg"></span></p>
  <p class=MsoCaption align=center style='text-align:center'><span
  lang=EN-US>3</span></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=EN-US><img width=272 height=279
  src="eav_cg_lab_67_files/image010.jpg"></span></p>
  <p class=MsoCaption align=center style='text-align:center'><span
  lang=EN-US>4</span></p>
  </td>
 </tr>
 <tr style='height:17.1pt'>
  <td width=39 rowspan=2 style='width:28.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 1.4pt 0cm 1.4pt;height:17.1pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US>5</span></b></p>
  </td>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:17.1pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Длина «змейки» -
  1 звено</i></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:17.1pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Длина «змейки» -
  10 звеньев</i></p>
  </td>
 </tr>
 <tr style='height:2.0cm'>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><img
  width=271 height=278 src="eav_cg_lab_67_files/image011.jpg"></span></p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><img
  width=280 height=287 src="eav_cg_lab_67_files/image012.jpg"></span></p>
  </td>
 </tr>
</table>

<span style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=597
 style='width:448.05pt;border-collapse:collapse;border:none'>
 <tr style='height:17.55pt'>
  <td width=39 rowspan=3 style='width:28.9pt;border:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:17.55pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=559 colspan=2 style='width:419.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 1.4pt 0cm 1.4pt;height:17.55pt'>
  <p class=MsoNormal align=center style='text-align:center'><i>Последовательность
  столкновения «змейки» с краем поверхности</i></p>
  </td>
 </tr>
 <tr style='height:2.0cm'>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=EN-US><img width=271 height=278
  src="eav_cg_lab_67_files/image013.jpg"></span></p>
  <p class=MsoCaption align=center style='text-align:center'>1</p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=EN-US><img width=280 height=287
  src="eav_cg_lab_67_files/image014.jpg"></span></p>
  <p class=MsoCaption align=center style='text-align:center'>2</p>
  </td>
 </tr>
 <tr style='height:2.0cm'>
  <td width=275 style='width:206.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=EN-US><img width=271 height=278
  src="eav_cg_lab_67_files/image015.jpg"></span></p>
  <p class=MsoCaption align=center style='text-align:center'>3</p>
  </td>
  <td width=284 style='width:212.75pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 1.4pt 0cm 1.4pt;height:2.0cm'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=EN-US><img width=280 height=287
  src="eav_cg_lab_67_files/image016.jpg"></span></p>
  <p class=MsoCaption align=center style='text-align:center'>4</p>
  </td>
 </tr>
</table>

<h1>6. Вывод</h1>

<p class=MsoNormal style='text-align:justify'>В ходе выполнения курсовой работы
была разработана программа, реализующая движение по поверхности «змейки»,
составленной из переменного числа звеньев, каждое из которых представляет собой
сферу, с глубиной отрисовки, изменяемой пользователем. «Змейка» движется
последовательно, равномерно, с учетом столкновений со стенками комнаты.</p>

<p class=MsoNormal style='text-align:justify'>Также реализованы эффекты
отражения и тени от протяженного источника.</p>

<b><span style='font-size:16.0pt;font-family:"Arial","sans-serif"'><br
clear=all style='page-break-before:always'>
</span></b>

<h1>7. Используемая литература</h1>

<p class=MsoNormal>1) Ю.М. Баяковский, А.В. Игнатенко, А.И. Фролов. <i>«Графическая
библиотека </i><i><span lang=EN-US style='text-transform:uppercase'>OpenGL</span></i><i><span
style='text-transform:uppercase'>»</span></i><span style='text-transform:uppercase'>
</span>учебно-методическое пособие</p>

</div>

</body>

</html>
